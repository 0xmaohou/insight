<div class="container">
    {% for message in get_flashed_messages() %}
    <div class="alert alert-warning">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        {{ message }}
    </div>
    {% endfor %}

</div>

<script src="{{ url_for('static', filename='jquery.min.js') }}"></script>
<script src="/static/css/drop/bootstrap.min.js"></script>
<script src="{{ url_for('static', filename='jquery.cookie.js') }}"></script>

<script src="/static/plugins/editormd/editormd.js"></script>
<script type="text/javascript">
    var testEditor;
    var xsrf = $.cookie("_xsrf")
    $(function() {
        testEditor = editormd("editormd", {
            width: "100%",
            height: 640,
            path: "/static/plugins/editormd/lib/",
            imageUpload: true,
            imageFormats: ["jpg", "jpeg", "gif", "png", "bmp"],
            imageUploadURL: "/drops/upload_img",
        });
        $("#editsub").bind('click', function() {
                $.proxy(
                    $.post("edit", {
                            markdown: testEditor.getValue(),
                            subject: $("#subject").val(),
                            tags: $("#tags").val(),
                            Category: $("#Category").val(),
                            TYPE: "ADD",
                            ID: "",
                            _xsrf: xsrf
                        },
                        function(data) {
                            alert(data)
                        }
                    ), testEditor);
            })
            /*
            // or
            testEditor = editormd({
            id : "test-editormd",
            width : "90%",
            height : 640,
            path : "../lib/"
            });
            */
    });
    // $(document).ready(function() {
    //     if ("" != "") {
    //         $("#Category").val("")
    //     }
    // })
    // $("#cconf").click((function() {
    //     $("#LB").modal()
    // }));
    // $("#new").click((function() {
    //     $("#LB").modal('hide')
    //     $("#newadd").modal();
    // }));
    // $("#del").click((function() {
    //     var Category = ''
    //     $("[name='LB']:checkbox:checked").each(function() {
    //         Category += $(this).val() + ',';
    //     })
    //     if (Category == '') {
    //         alert('你未选中任何项目！')
    //     } else {
    //         $.post("/edit", {
    //             _xsrf: xsrf,
    //             TYPE: 'DEL',
    //             Category: Category
    //         }, function(data) {
    //             alert(data);
    //             location.reload();
    //         })
    //     }
    // }));
    // $("#addsub").click((function() {
    //     var newlb = $("#addname").val()
    //     if (newlb == '') {
    //         alert('不能为空值！')
    //     } else {
    //         $.post("/edit", {
    //             _xsrf: xsrf,
    //             TYPE: 'NEW',
    //             Category: newlb
    //         }, function(data) {
    //             alert(data);
    //             location.reload();
    //         })
    //     }
    // }));
</script>


</body>

</html>
